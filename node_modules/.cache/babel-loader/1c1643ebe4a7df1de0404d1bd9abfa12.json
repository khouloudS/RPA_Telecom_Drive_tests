{"ast":null,"code":"'use strict';\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar _require = require('../../util/constants'),\n    E = _require.typeErrors,\n    trackPriority = _require.trackPriority;\n\nfunction mixinRemoteMediaTrack(AudioOrVideoTrack) {\n  /**\r\n   * A {@link RemoteMediaTrack} represents a {@link MediaTrack} published to a\r\n   * {@link Room} by a {@link RemoteParticipant}.\r\n   * @property {boolean} isEnabled - Whether the {@link RemoteMediaTrack} is enabled\r\n   * @property {boolean} isSwitchedOff - Whether the {@link RemoteMediaTrack} is switched off\r\n   * @property {Track.SID} sid - The SID assigned to the {@link RemoteMediaTrack}\r\n   * @property {?Track.Priority} priority - The subscribe priority of the {@link RemoteMediaTrack}\r\n   * @emits RemoteMediaTrack#disabled\r\n   * @emits RemoteMediaTrack#enabled\r\n   * @emits RemoteMediaTrack#switchedOff\r\n   * @emits RemoteMediaTrack#switchedOn\r\n   */\n  return function (_AudioOrVideoTrack) {\n    _inherits(RemoteMediaTrack, _AudioOrVideoTrack);\n    /**\r\n     * Construct a {@link RemoteMediaTrack}.\r\n     * @param {Track.SID} sid\r\n     * @param {MediaTrackReceiver} mediaTrackReceiver\r\n     * @param {boolean} isEnabled\r\n     * @param {function(?Track.Priority): void} setPriority - Set or clear the subscribe\r\n     *  {@link Track.Priority} of the {@link RemoteMediaTrack}\r\n     * @param {{log: Log, name: ?string}} options\r\n     */\n\n\n    function RemoteMediaTrack(sid, mediaTrackReceiver, isEnabled, setPriority, options) {\n      _classCallCheck(this, RemoteMediaTrack);\n\n      var _this = _possibleConstructorReturn(this, (RemoteMediaTrack.__proto__ || Object.getPrototypeOf(RemoteMediaTrack)).call(this, mediaTrackReceiver, options));\n\n      Object.defineProperties(_this, {\n        _isEnabled: {\n          value: isEnabled,\n          writable: true\n        },\n        _isSwitchedOff: {\n          value: false,\n          writable: true\n        },\n        _priority: {\n          value: null,\n          writable: true\n        },\n        _setPriority: {\n          value: setPriority\n        },\n        isEnabled: {\n          enumerable: true,\n          get: function get() {\n            return this._isEnabled;\n          }\n        },\n        isSwitchedOff: {\n          enumerable: true,\n          get: function get() {\n            return this._isSwitchedOff;\n          }\n        },\n        priority: {\n          enumerable: true,\n          get: function get() {\n            return this._priority;\n          }\n        },\n        sid: {\n          enumerable: true,\n          value: sid\n        }\n      });\n      return _this;\n    }\n    /**\r\n     * Update the subscribe {@link Track.Priority} of the {@link RemoteMediaTrack}.\r\n     * @param {?Track.Priority} priority - the new subscribe {@link Track.Priority};\r\n     *   If <code>null</code>, then the subscribe {@link Track.Priority} is cleared, which\r\n     *   means the {@link Track.Priority} set by the publisher is now the effective priority.\r\n     * @returns {this}\r\n     * @throws {RangeError}\r\n     */\n\n\n    _createClass(RemoteMediaTrack, [{\n      key: 'setPriority',\n      value: function setPriority(priority) {\n        var priorityValues = [null].concat(_toConsumableArray(Object.values(trackPriority)));\n\n        if (!priorityValues.includes(priority)) {\n          // eslint-disable-next-line new-cap\n          throw E.INVALID_VALUE('priority', priorityValues);\n        }\n\n        if (this._priority !== priority) {\n          this._priority = priority;\n\n          this._setPriority(priority);\n        }\n\n        return this;\n      }\n      /**\r\n       * @private\r\n       * @param {boolean} isEnabled\r\n       */\n\n    }, {\n      key: '_setEnabled',\n      value: function _setEnabled(isEnabled) {\n        if (this._isEnabled !== isEnabled) {\n          this._isEnabled = isEnabled;\n          this.emit(this._isEnabled ? 'enabled' : 'disabled', this);\n        }\n      }\n      /**\r\n       * @private\r\n       * @param {boolean} isSwitchedOff\r\n       */\n\n    }, {\n      key: '_setSwitchedOff',\n      value: function _setSwitchedOff(isSwitchedOff) {\n        if (this._isSwitchedOff !== isSwitchedOff) {\n          this._isSwitchedOff = isSwitchedOff;\n          this.emit(isSwitchedOff ? 'switchedOff' : 'switchedOn', this);\n        }\n      }\n    }, {\n      key: 'attach',\n      value: function attach(el) {\n        var result = _get(RemoteMediaTrack.prototype.__proto__ || Object.getPrototypeOf(RemoteMediaTrack.prototype), 'attach', this).call(this, el);\n\n        if (this.mediaStreamTrack.enabled !== true) {\n          // NOTE(mpatwardhan): we disable mediaStreamTrack when there\n          // are no attchments to it (see notes below). Now that there\n          // are attachments reenable the track.\n          this.mediaStreamTrack.enabled = true;\n        }\n\n        return result;\n      }\n    }, {\n      key: 'detach',\n      value: function detach(el) {\n        var result = _get(RemoteMediaTrack.prototype.__proto__ || Object.getPrototypeOf(RemoteMediaTrack.prototype), 'detach', this).call(this, el);\n\n        if (this._attachments.size === 0) {\n          // NOTE(mpatwardhan): chrome continues playing webrtc audio\n          // track even after audio element is removed from the DOM.\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=749928\n          // to workaround: here disable the track when\n          // there are no elements attached to it.\n          this.mediaStreamTrack.enabled = false;\n        }\n\n        return result;\n      }\n    }]);\n\n    return RemoteMediaTrack;\n  }(AudioOrVideoTrack);\n}\n/**\r\n * A {@link RemoteMediaTrack} was disabled.\r\n * @param {RemoteMediaTrack} track - The {@link RemoteMediaTrack} that was\r\n *   disabled\r\n * @event RemoteMediaTrack#disabled\r\n */\n\n/**\r\n * A {@link RemoteMediaTrack} was enabled.\r\n * @param {RemoteMediaTrack} track - The {@link RemoteMediaTrack} that was\r\n *   enabled\r\n * @event RemoteMediaTrack#enabled\r\n */\n\n/**\r\n * A {@link RemoteMediaTrack} was switched off.\r\n * @param {RemoteMediaTrack} track - The {@link RemoteMediaTrack} that was\r\n *   switched off\r\n * @event RemoteMediaTrack#switchedOff\r\n */\n\n/**\r\n * A {@link RemoteMediaTrack} was switched on.\r\n * @param {RemoteMediaTrack} track - The {@link RemoteMediaTrack} that was\r\n *   switched on\r\n * @event RemoteMediaTrack#switchedOn\r\n */\n\n\nmodule.exports = mixinRemoteMediaTrack;","map":{"version":3,"sources":["C:/Users/khouloud/Documents/PI/MERN_Stack_PI/node_modules/twilio-video/es5/media/track/remotemediatrack.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","value","getter","call","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_require","require","E","typeErrors","trackPriority","mixinRemoteMediaTrack","AudioOrVideoTrack","_AudioOrVideoTrack","RemoteMediaTrack","sid","mediaTrackReceiver","isEnabled","setPriority","options","_this","_isEnabled","_isSwitchedOff","_priority","_setPriority","isSwitchedOff","priority","priorityValues","concat","values","includes","INVALID_VALUE","_setEnabled","emit","_setSwitchedOff","attach","el","result","mediaStreamTrack","enabled","detach","_attachments","size","module","exports"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\r\n\r\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\r\n\r\nvar _require = require('../../util/constants'),\r\n    E = _require.typeErrors,\r\n    trackPriority = _require.trackPriority;\r\n\r\nfunction mixinRemoteMediaTrack(AudioOrVideoTrack) {\r\n  /**\r\n   * A {@link RemoteMediaTrack} represents a {@link MediaTrack} published to a\r\n   * {@link Room} by a {@link RemoteParticipant}.\r\n   * @property {boolean} isEnabled - Whether the {@link RemoteMediaTrack} is enabled\r\n   * @property {boolean} isSwitchedOff - Whether the {@link RemoteMediaTrack} is switched off\r\n   * @property {Track.SID} sid - The SID assigned to the {@link RemoteMediaTrack}\r\n   * @property {?Track.Priority} priority - The subscribe priority of the {@link RemoteMediaTrack}\r\n   * @emits RemoteMediaTrack#disabled\r\n   * @emits RemoteMediaTrack#enabled\r\n   * @emits RemoteMediaTrack#switchedOff\r\n   * @emits RemoteMediaTrack#switchedOn\r\n   */\r\n  return function (_AudioOrVideoTrack) {\r\n    _inherits(RemoteMediaTrack, _AudioOrVideoTrack);\r\n\r\n    /**\r\n     * Construct a {@link RemoteMediaTrack}.\r\n     * @param {Track.SID} sid\r\n     * @param {MediaTrackReceiver} mediaTrackReceiver\r\n     * @param {boolean} isEnabled\r\n     * @param {function(?Track.Priority): void} setPriority - Set or clear the subscribe\r\n     *  {@link Track.Priority} of the {@link RemoteMediaTrack}\r\n     * @param {{log: Log, name: ?string}} options\r\n     */\r\n    function RemoteMediaTrack(sid, mediaTrackReceiver, isEnabled, setPriority, options) {\r\n      _classCallCheck(this, RemoteMediaTrack);\r\n\r\n      var _this = _possibleConstructorReturn(this, (RemoteMediaTrack.__proto__ || Object.getPrototypeOf(RemoteMediaTrack)).call(this, mediaTrackReceiver, options));\r\n\r\n      Object.defineProperties(_this, {\r\n        _isEnabled: {\r\n          value: isEnabled,\r\n          writable: true\r\n        },\r\n        _isSwitchedOff: {\r\n          value: false,\r\n          writable: true\r\n        },\r\n        _priority: {\r\n          value: null,\r\n          writable: true\r\n        },\r\n        _setPriority: {\r\n          value: setPriority\r\n        },\r\n        isEnabled: {\r\n          enumerable: true,\r\n          get: function get() {\r\n            return this._isEnabled;\r\n          }\r\n        },\r\n        isSwitchedOff: {\r\n          enumerable: true,\r\n          get: function get() {\r\n            return this._isSwitchedOff;\r\n          }\r\n        },\r\n        priority: {\r\n          enumerable: true,\r\n          get: function get() {\r\n            return this._priority;\r\n          }\r\n        },\r\n        sid: {\r\n          enumerable: true,\r\n          value: sid\r\n        }\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    /**\r\n     * Update the subscribe {@link Track.Priority} of the {@link RemoteMediaTrack}.\r\n     * @param {?Track.Priority} priority - the new subscribe {@link Track.Priority};\r\n     *   If <code>null</code>, then the subscribe {@link Track.Priority} is cleared, which\r\n     *   means the {@link Track.Priority} set by the publisher is now the effective priority.\r\n     * @returns {this}\r\n     * @throws {RangeError}\r\n     */\r\n\r\n\r\n    _createClass(RemoteMediaTrack, [{\r\n      key: 'setPriority',\r\n      value: function setPriority(priority) {\r\n        var priorityValues = [null].concat(_toConsumableArray(Object.values(trackPriority)));\r\n        if (!priorityValues.includes(priority)) {\r\n          // eslint-disable-next-line new-cap\r\n          throw E.INVALID_VALUE('priority', priorityValues);\r\n        }\r\n        if (this._priority !== priority) {\r\n          this._priority = priority;\r\n          this._setPriority(priority);\r\n        }\r\n        return this;\r\n      }\r\n\r\n      /**\r\n       * @private\r\n       * @param {boolean} isEnabled\r\n       */\r\n\r\n    }, {\r\n      key: '_setEnabled',\r\n      value: function _setEnabled(isEnabled) {\r\n        if (this._isEnabled !== isEnabled) {\r\n          this._isEnabled = isEnabled;\r\n          this.emit(this._isEnabled ? 'enabled' : 'disabled', this);\r\n        }\r\n      }\r\n\r\n      /**\r\n       * @private\r\n       * @param {boolean} isSwitchedOff\r\n       */\r\n\r\n    }, {\r\n      key: '_setSwitchedOff',\r\n      value: function _setSwitchedOff(isSwitchedOff) {\r\n        if (this._isSwitchedOff !== isSwitchedOff) {\r\n          this._isSwitchedOff = isSwitchedOff;\r\n          this.emit(isSwitchedOff ? 'switchedOff' : 'switchedOn', this);\r\n        }\r\n      }\r\n    }, {\r\n      key: 'attach',\r\n      value: function attach(el) {\r\n        var result = _get(RemoteMediaTrack.prototype.__proto__ || Object.getPrototypeOf(RemoteMediaTrack.prototype), 'attach', this).call(this, el);\r\n        if (this.mediaStreamTrack.enabled !== true) {\r\n          // NOTE(mpatwardhan): we disable mediaStreamTrack when there\r\n          // are no attchments to it (see notes below). Now that there\r\n          // are attachments reenable the track.\r\n          this.mediaStreamTrack.enabled = true;\r\n        }\r\n        return result;\r\n      }\r\n    }, {\r\n      key: 'detach',\r\n      value: function detach(el) {\r\n        var result = _get(RemoteMediaTrack.prototype.__proto__ || Object.getPrototypeOf(RemoteMediaTrack.prototype), 'detach', this).call(this, el);\r\n        if (this._attachments.size === 0) {\r\n          // NOTE(mpatwardhan): chrome continues playing webrtc audio\r\n          // track even after audio element is removed from the DOM.\r\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=749928\r\n          // to workaround: here disable the track when\r\n          // there are no elements attached to it.\r\n          this.mediaStreamTrack.enabled = false;\r\n        }\r\n        return result;\r\n      }\r\n    }]);\r\n\r\n    return RemoteMediaTrack;\r\n  }(AudioOrVideoTrack);\r\n}\r\n\r\n/**\r\n * A {@link RemoteMediaTrack} was disabled.\r\n * @param {RemoteMediaTrack} track - The {@link RemoteMediaTrack} that was\r\n *   disabled\r\n * @event RemoteMediaTrack#disabled\r\n */\r\n\r\n/**\r\n * A {@link RemoteMediaTrack} was enabled.\r\n * @param {RemoteMediaTrack} track - The {@link RemoteMediaTrack} that was\r\n *   enabled\r\n * @event RemoteMediaTrack#enabled\r\n */\r\n\r\n/**\r\n * A {@link RemoteMediaTrack} was switched off.\r\n * @param {RemoteMediaTrack} track - The {@link RemoteMediaTrack} that was\r\n *   switched off\r\n * @event RemoteMediaTrack#switchedOff\r\n */\r\n\r\n/**\r\n * A {@link RemoteMediaTrack} was switched on.\r\n * @param {RemoteMediaTrack} track - The {@link RemoteMediaTrack} that was\r\n *   switched on\r\n * @event RemoteMediaTrack#switchedOn\r\n */\r\n\r\nmodule.exports = mixinRemoteMediaTrack;"]},"metadata":{},"sourceType":"script"}