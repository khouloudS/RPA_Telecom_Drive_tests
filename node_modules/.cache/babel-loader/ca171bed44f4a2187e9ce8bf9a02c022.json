{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\khouloud\\\\Documents\\\\PI\\\\MERN_Stack_PI\\\\src\\\\views\\\\DriveTest\\\\Engineer\\\\EnginnerList.js\";\nimport React from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"reactstrap/es/Button\";\nimport Card from \"react-bootstrap/Card\";\nimport { ScheduleComponent, Day, Week, WorkWeek, Month, Agenda, Inject } from \"@syncfusion/ej2-react-schedule\";\nimport axios from \"axios\";\nimport { Modal } from \"react-bootstrap\";\nimport jwt_decode from \"jwt-decode\";\n\nclass EnginnerList extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      drivetests: [],\n      Data: [],\n      show: false,\n      id: '',\n      _id: '',\n      first_name: '',\n      last_name: '',\n      email: '',\n      role: ''\n    };\n    this.HandleModal = this.HandleModal.bind(this);\n    this.HandleDelete = this.HandleDelete.bind(this);\n  }\n\n  HandleDelete(D) {\n    axios.delete('http://localhost:4000/api/driveTest/DeleteDriveTest/' + D).then(res => {\n      this.setState(previousState => {\n        return {\n          drivetests: previousState.drivetests.filter(m => m._id !== D)\n        };\n      }, document.location.href = '/admin/Engineer');\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  convertData(a) {\n    var accounting = [];\n\n    for (var i in a) {\n      var item = a[i];\n      var b;\n      var d1 = new Date(item.DriveTest_Start_Time);\n      var today = new Date();\n\n      if (item.DriveTest_State === true && item.DriveTest_Done_Date != null) {\n        b = {\n          \"Id\": item._id,\n          \"Subject\": item.DriveTest_Title,\n          \"StartTime\": item.DriveTest_Start_Time,\n          \"EndTime\": item.DriveTest_Done_Date,\n          \"Category\": \"Done\"\n        };\n      } else if (item.DriveTest_State === false) if (item.DriveTest_Done_Date == null && today < d1) {\n        b = {\n          \"Id\": item._id,\n          \"Subject\": item.DriveTest_Title,\n          \"StartTime\": item.DriveTest_Start_Time,\n          \"EndTime\": item.DriveTest_Start_Time,\n          \"Category\": \"Pending\"\n        };\n      } else if (item.DriveTest_Done_Date != null) {\n        b = {\n          \"Id\": item._id,\n          \"Subject\": item.DriveTest_Title,\n          \"StartTime\": item.DriveTest_Start_Time,\n          \"EndTime\": item.DriveTest_Done_Date,\n          \"Category\": \"Interrupted\"\n        };\n      } else if (today > d1) {\n        b = {\n          \"Id\": item._id,\n          \"Subject\": item.DriveTest_Title,\n          \"StartTime\": item.DriveTest_Start_Time,\n          \"EndTime\": item.DriveTest_Start_Time,\n          \"Category\": \"Missed\"\n        };\n      }\n\n      accounting.push(b);\n    }\n\n    return accounting;\n  }\n\n  componentDidMount() {\n    const token = localStorage.usertoken;\n    const decoded = jwt_decode(token);\n    console.log(decoded);\n    this.setState({\n      _id: decoded._id,\n      first_name: decoded.first_name,\n      last_name: decoded.last_name,\n      email: decoded.email,\n      role: decoded.role\n    });\n    axios.get('http://localhost:4000/api/driveTest/engineer/drivetests/' + decoded._id).then(response => {\n      this.setState({\n        drivetests: response.data,\n        data: this.convertData(response.data)\n      });\n      console.log(this.state.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  template(props) {\n    return React.createElement(\"div\", {\n      className: \"tooltip-wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"content-area\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, props.Subject), props.City !== null && props.City !== undefined ? React.createElement(\"div\", {\n      className: \"city\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, props.City) : '', React.createElement(\"div\", {\n      className: \"time\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"From :\", props.StartTime.toLocaleString()), React.createElement(\"div\", {\n      className: \"time\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"To  :\", props.EndTime.toLocaleString())));\n  }\n\n  header(props) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, props.elementType === 'cell' ? React.createElement(\"div\", {\n      className: \"e-cell-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"e-header-icon-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"e-close\",\n      title: \"Close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }))) : React.createElement(\"div\", {\n      className: \"e-event-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"e-header-icon-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"e-close\",\n      title: \"CLOSE\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"e-subject-wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, props.Subject !== undefined ? React.createElement(\"div\", {\n      className: \"e-subject e-text-ellipsis\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, props.Subject) : \"\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      className: \"e-subject e-text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, props.Category), React.createElement(Button, {\n      color: \"danger\",\n      outline: true,\n      type: \"button\",\n      size: \"sm\",\n      onClick: () => {\n        this.HandleModal(props.Id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Delete\"), React.createElement(\"a\", {\n      href: \"/admin/EditDriveTest/\".concat(props.Id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \" \", React.createElement(Button, {\n      color: \"primary\",\n      outline: true,\n      type: \"button\",\n      size: \"sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Edit\"), \" \"))));\n  }\n\n  HandleModal(item) {\n    this.setState({\n      show: !this.state.show,\n      id: item\n    });\n  }\n\n  footer(props) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, props.elementType === 'cell' ? React.createElement(\"div\", {\n      className: \"e-cell-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"e-event-details\",\n      title: \"Extra Details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Extra Details\"), React.createElement(\"button\", {\n      className: \"e-event-create\",\n      title: \"Add\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Add\")) : React.createElement(\"div\", {\n      className: \"e-event-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"e-event-edit\",\n      title: \"Edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Edit\"), React.createElement(\"button\", {\n      className: \"e-event-delete\",\n      title: \"Delete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"Delete\")));\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"header pb-8 pt-5 pt-lg-8 d-flex align-items-center\",\n      style: {\n        minHeight: \"600px\",\n        backgroundImage: \"url(\" + require(\"assets/img/theme/Logo-SFM.png\") + \")\",\n        backgroundSize: \"50 %\",\n        backgroundPosition: \"center top\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"mask bg-gradient-default opacity-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), React.createElement(Container, {\n      className: \"d-flex align-items-center\",\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(Container, {\n      className: \"d-flex align-items-center\",\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"7\",\n      md: \"10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"display-2 text-white text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Welcome To your work space \")), React.createElement(Col, {\n      lg: \"7\",\n      md: \"10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-white mt-0 mb-5 text-center \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"This is your Work page.   Here is where you will plan the drive tests\")), React.createElement(Col, {\n      lg: \"7\",\n      md: \"10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"info\",\n      className: \"center\",\n      href: \"/admin/PlanDriveTest\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"+ Add New drive Test \")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), React.createElement(Col, {\n      lg: \"12\",\n      md: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: \"card-frame \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(ScheduleComponent, {\n      height: \"550px\",\n      currentView: \"Month\",\n      readonly: true,\n      quickInfoTemplates: {\n        header: this.header.bind(this),\n        footer: this.footer.bind(this)\n      },\n      eventSettings: {\n        dataSource: this.state.data,\n        enableTooltip: true,\n        tooltipTemplate: this.template.bind(this)\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(Inject, {\n      services: [Day, Week, WorkWeek, Month, Agenda],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    })))))))), React.createElement(Modal, {\n      show: this.state.show,\n      onHide: () => this.HandleModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      id: \"contained-modal-title-vcenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"DELETE CONFIRMATION \"))), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, \" Are You sure You want to delete this drive test ? \")), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"danger\",\n      onClick: () => this.HandleDelete(this.state.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \"Confirm\"), React.createElement(Button, {\n      color: \"default\",\n      onClick: () => this.HandleModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, \"Close\"))));\n  }\n\n}\n\nexport default EnginnerList;","map":{"version":3,"sources":["C:/Users/khouloud/Documents/PI/MERN_Stack_PI/src/views/DriveTest/Engineer/EnginnerList.js"],"names":["React","Container","Row","Col","Button","Card","ScheduleComponent","Day","Week","WorkWeek","Month","Agenda","Inject","axios","Modal","jwt_decode","EnginnerList","Component","constructor","arguments","state","drivetests","Data","show","id","_id","first_name","last_name","email","role","HandleModal","bind","HandleDelete","D","delete","then","res","setState","previousState","filter","m","document","location","href","catch","err","console","log","convertData","a","accounting","i","item","b","d1","Date","DriveTest_Start_Time","today","DriveTest_State","DriveTest_Done_Date","DriveTest_Title","push","componentDidMount","token","localStorage","usertoken","decoded","get","response","data","error","template","props","Subject","City","undefined","StartTime","toLocaleString","EndTime","header","elementType","Category","Id","footer","render","minHeight","backgroundImage","require","backgroundSize","backgroundPosition","dataSource","enableTooltip","tooltipTemplate"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Button from \"reactstrap/es/Button\";\r\nimport Card from \"react-bootstrap/Card\";\r\n\r\nimport {\r\n    ScheduleComponent,\r\n    Day,\r\n    Week,\r\n    WorkWeek,\r\n    Month,\r\n    Agenda,\r\n    Inject,\r\n} from \"@syncfusion/ej2-react-schedule\";\r\nimport axios from \"axios\";\r\nimport {Modal} from \"react-bootstrap\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\n\r\nclass EnginnerList extends React.Component {\r\n\r\n\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {\r\n            drivetests: [],\r\n            Data:[],\r\n            show :false,\r\n            id : '',\r\n            _id:'',\r\n            first_name: '',\r\n            last_name: '',\r\n            email: '',\r\n            role:'',\r\n        }\r\n        this.HandleModal=this.HandleModal.bind(this);\r\n        this.HandleDelete=this.HandleDelete.bind(this);\r\n    }\r\n    HandleDelete(D) {\r\n\r\n        axios.delete('http://localhost:4000/api/driveTest/DeleteDriveTest/'+D)\r\n            .then(res => {\r\n                this.setState(previousState => {\r\n                        return {\r\n                            drivetests: previousState.drivetests.filter(m => m._id !== D)\r\n                        };\r\n                    },\r\n                    document.location.href='/admin/Engineer');\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n\r\n\r\n    }\r\n    convertData(a){\r\n        var accounting = [];\r\n\r\n        for(var i in a) {\r\n            var item =a[i];\r\n            var b;\r\n            var d1 = new Date(item.DriveTest_Start_Time);\r\n            var today = new Date();\r\n            if(item.DriveTest_State===true && item.DriveTest_Done_Date!=null)\r\n            {\r\n                b ={\r\n                    \"Id\" : item._id,\r\n                    \"Subject\"  : item.DriveTest_Title,\r\n                    \"StartTime\"       : item.DriveTest_Start_Time,\r\n                    \"EndTime\"       : item.DriveTest_Done_Date,\r\n                    \"Category\" : \"Done\",\r\n\r\n\r\n\r\n                }\r\n            }\r\n            else if (item.DriveTest_State===false)\r\n                if(item.DriveTest_Done_Date ==null && (today<d1))\r\n                {\r\n                    b ={\r\n                        \"Id\" : item._id,\r\n                        \"Subject\"  : item.DriveTest_Title,\r\n                        \"StartTime\"       : item.DriveTest_Start_Time,\r\n                        \"EndTime\"       : item.DriveTest_Start_Time,\r\n                        \"Category\" : \"Pending\",\r\n\r\n\r\n\r\n                    }\r\n                }\r\n                else if (item.DriveTest_Done_Date !=null )\r\n                {\r\n                    b ={\r\n                        \"Id\" : item._id,\r\n                        \"Subject\"  : item.DriveTest_Title,\r\n                        \"StartTime\"       : item.DriveTest_Start_Time,\r\n                        \"EndTime\"       : item.DriveTest_Done_Date,\r\n                        \"Category\" : \"Interrupted\",\r\n\r\n\r\n\r\n                    }\r\n                }\r\n                else if( (today> d1))\r\n                {\r\n                    b ={\r\n                        \"Id\" : item._id,\r\n                        \"Subject\"  : item.DriveTest_Title,\r\n                        \"StartTime\"       : item.DriveTest_Start_Time,\r\n                        \"EndTime\"       : item.DriveTest_Start_Time,\r\n                        \"Category\" : \"Missed\",\r\n\r\n\r\n\r\n                    }\r\n                }\r\n            accounting.push(b); }\r\n        return accounting\r\n    }\r\n\r\n    componentDidMount() {\r\n        const token = localStorage.usertoken\r\n        const decoded = jwt_decode(token)\r\n        console.log(decoded)\r\n        this.setState({\r\n            _id:decoded._id,\r\n            first_name: decoded.first_name,\r\n            last_name: decoded.last_name,\r\n            email: decoded.email,\r\n            role: decoded.role\r\n        })\r\n        axios.get('http://localhost:4000/api/driveTest/engineer/drivetests/'+decoded._id)\r\n            .then(response => {\r\n                this.setState({drivetests: response.data , data:this.convertData(response.data) });\r\n                console.log(this.state.data);\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            });\r\n\r\n\r\n    }\r\n    template(props) {\r\n        return (<div className=\"tooltip-wrap\">\r\n            <div className=\"content-area\"><div className=\"name\">{props.Subject}</div>\r\n                {(props.City !== null && props.City !== undefined) ? <div className=\"city\">{props.City}</div> : ''}\r\n                <div className=\"time\">From :{props.StartTime.toLocaleString()}</div>\r\n                <div className=\"time\">To  :{props.EndTime.toLocaleString()}</div></div></div>);\r\n    }\r\n\r\n    header(props) {\r\n        return (<div>\r\n            {props.elementType === 'cell' ?\r\n                <div className=\"e-cell-header\">\r\n                    <div className=\"e-header-icon-wrapper\">\r\n                        <button className=\"e-close\" title=\"Close\"></button>\r\n                    </div>\r\n                </div> :\r\n\r\n                <div className=\"e-event-header\">\r\n                    <div className=\"e-header-icon-wrapper\">\r\n                        <button className=\"e-close\" title=\"CLOSE\"></button>\r\n                    </div>\r\n\r\n\r\n                    <div className=\"e-subject-wrap\">\r\n                        {(props.Subject !== undefined) ?\r\n                            <div className=\"e-subject e-text-ellipsis\">{props.Subject}</div>\r\n                            : \"\"}\r\n\r\n                        <br></br>\r\n                        <h1 className=\"e-subject e-text-center\" >{props.Category}</h1>\r\n                        <Button color=\"danger\" outline type=\"button\"  size=\"sm\" onClick={()=>{this.HandleModal(props.Id)}}>Delete</Button>\r\n                        <a href={`/admin/EditDriveTest/${props.Id}`}> <Button color=\"primary\" outline type=\"button\"   size=\"sm\">Edit</Button> </a>\r\n                    </div></div>\r\n            }\r\n        </div>);\r\n    }\r\n    HandleModal(item) {\r\n        this.setState({\r\n            show: !this.state.show,\r\n            id :item\r\n        });\r\n    }\r\n    footer(props) {\r\n        return (<div>\r\n            {props.elementType === 'cell' ?\r\n                <div className=\"e-cell-footer\">\r\n                    <button className=\"e-event-details\" title=\"Extra Details\">Extra Details</button>\r\n                    <button className=\"e-event-create\" title=\"Add\">Add</button>\r\n                </div>\r\n                :\r\n                <div className=\"e-event-footer\">\r\n                    <button className=\"e-event-edit\" title=\"Edit\">Edit</button>\r\n                    <button className=\"e-event-delete\" title=\"Delete\">Delete</button>\r\n                </div>}\r\n        </div>); }\r\n    render() {\r\n\r\n        return (\r\n            <>\r\n\r\n                <div\r\n                    className=\"header pb-8 pt-5 pt-lg-8 d-flex align-items-center\"\r\n                    style={{\r\n                        minHeight: \"600px\",\r\n                        backgroundImage:\r\n                            \"url(\" + require(\"assets/img/theme/Logo-SFM.png\") + \")\",\r\n                        backgroundSize: \"50 %\"  ,\r\n                        backgroundPosition: \"center top\"\r\n                    }}\r\n                >\r\n                    {/* Mask */}\r\n                    <span className=\"mask bg-gradient-default opacity-8\" />\r\n                    {/* Header container */}\r\n                    <Container className=\"d-flex align-items-center\" fluid>\r\n                        <Container className=\"d-flex align-items-center\" fluid>\r\n                            <Row>\r\n                                <Col lg=\"7\" md=\"10\">\r\n                                    <h1 className=\"display-2 text-white text-center\">Welcome To your work space </h1>\r\n\r\n\r\n                                </Col>\r\n                                <Col lg=\"7\" md=\"10\">\r\n                                    <p className=\"text-white mt-0 mb-5 text-center \">\r\n                                        This is your Work page.   Here is where you will plan the drive tests\r\n                                    </p>\r\n                                </Col>\r\n                                <Col lg=\"7\" md=\"10\">\r\n                                    <Button color=\"info\"  className=\"center\"  href=\"/admin/PlanDriveTest\" >+ Add New drive Test </Button>\r\n                                </Col>\r\n                                <br></br><br></br><br></br>\r\n\r\n                                <Col lg=\"12\" md=\"6\">\r\n\r\n                                    <Card className=\"card-frame \">\r\n\r\n\r\n                                        <ScheduleComponent  height='550px' currentView='Month'\r\n                                                            readonly={true}\r\n                                                            quickInfoTemplates={{ header: this.header.bind(this),footer: this.footer.bind(this) }}\r\n                                                            eventSettings={{ dataSource: this.state.data, enableTooltip: true,\r\n                                                                tooltipTemplate: this.template.bind(this) }}\r\n                                        >\r\n                                            <Inject services={[Day, Week, WorkWeek, Month, Agenda ]}/>\r\n\r\n                                        </ScheduleComponent>\r\n                                    </Card>\r\n                                </Col>\r\n                            </Row>\r\n\r\n                        </Container>\r\n                    </Container>\r\n\r\n                </div>\r\n\r\n                <Modal show={this.state.show} onHide={()=>this.HandleModal()}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                            <h2>DELETE CONFIRMATION </h2>\r\n                        </Modal.Title >\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <h4> Are You sure You want to delete this drive test ? </h4>\r\n\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n\r\n                        <Button color=\"danger\" onClick={()=>this.HandleDelete(this.state.id)} >\r\n                            Confirm\r\n                        </Button>\r\n                        <Button color=\"default\"  onClick={()=>this.HandleModal()}>\r\n                            Close\r\n                        </Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\nexport default EnginnerList;"]},"metadata":{},"sourceType":"module"}