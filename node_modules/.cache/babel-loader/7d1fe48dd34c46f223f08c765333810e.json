{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\khouloud\\\\Documents\\\\PI\\\\MERN_Stack_PI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\khouloud\\\\Documents\\\\PI\\\\MERN_Stack_PI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport adapter from \"webrtc-adapter\";\nimport TwilioVideo from \"twilio-video\";\nimport { isEmpty, first } from \"lodash\";\nimport { getToken } from \"../../api\";\n\nclass AppContainer extends PureComponent {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.state = {\n      videoRoom: null,\n      isJoining: false,\n      userName: \"\",\n      roomName: \"\",\n      errorMessage: null\n    };\n    this.str = window.location.href;\n    this.res = this.str.search(\"/App/\") + 5;\n    this.room_value_id = this.str.substr(this.res, this.str.length - 1);\n    this.getToken = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var userName, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            userName = _this.state.userName;\n            _context.next = 3;\n            return getToken(userName);\n\n          case 3:\n            response = _context.sent;\n            return _context.abrupt(\"return\", response.data.token);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    this.joinRoom = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var roomName, token, localVideoTrack, localAudioTrack, videoRoom;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            roomName = _this.state.roomName;\n\n            _this.setState({\n              isJoining: true\n            });\n\n            _context2.prev = 2;\n            _context2.next = 5;\n            return _this.getToken();\n\n          case 5:\n            token = _context2.sent;\n            _context2.next = 8;\n            return TwilioVideo.createLocalVideoTrack();\n\n          case 8:\n            localVideoTrack = _context2.sent;\n\n            _this.setState({\n              localVideoTrack\n            });\n\n            _context2.next = 12;\n            return TwilioVideo.createLocalAudioTrack();\n\n          case 12:\n            localAudioTrack = _context2.sent;\n\n            _this.setState({\n              localAudioTrack\n            });\n\n            _context2.next = 16;\n            return TwilioVideo.connect(token, {\n              name: roomName,\n              tracks: [localVideoTrack, localAudioTrack],\n              insights: false\n            });\n\n          case 16:\n            videoRoom = _context2.sent;\n            videoRoom.on(\"disconnected\", () => {\n              _this.stopVideoTrack();\n\n              _this.stopAudioTrack();\n\n              _this.stopScreenTrack();\n\n              _this.setState({\n                videoRoom: null\n              });\n            });\n\n            _this.setState({\n              videoRoom\n            });\n\n            _context2.next = 26;\n            break;\n\n          case 21:\n            _context2.prev = 21;\n            _context2.t0 = _context2[\"catch\"](2);\n\n            _this.stopVideoTrack();\n\n            _this.stopAudioTrack();\n\n            _this.setState({\n              errorMessage: _context2.t0.message\n            });\n\n          case 26:\n            _this.setState({\n              isJoining: false\n            });\n\n          case 27:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[2, 21]]);\n    }));\n    this.leaveRoom = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var videoRoom;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            videoRoom = _this.state.videoRoom;\n\n            if (videoRoom) {\n              videoRoom.disconnect();\n            }\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }));\n\n    this.stopTrack = trackName => {\n      const track = this.state[trackName];\n\n      if (track) {\n        track.stop();\n        this.setState({\n          [trackName]: null\n        });\n      }\n    };\n\n    this.stopScreenTrack = () => this.stopTrack(\"screenTrack\");\n\n    this.stopVideoTrack = () => this.stopTrack(\"localVideoTrack\");\n\n    this.stopAudioTrack = () => this.stopTrack(\"localAudioTrack\");\n\n    this.shareScreen = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var _this$state, videoRoom, localVideoTrack, screenTrack, stream, newScreenTrack;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _this$state = _this.state, videoRoom = _this$state.videoRoom, localVideoTrack = _this$state.localVideoTrack, screenTrack = _this$state.screenTrack;\n\n            if (screenTrack) {\n              _context4.next = 12;\n              break;\n            }\n\n            _context4.next = 5;\n            return navigator.mediaDevices.getDisplayMedia({\n              video: true\n            });\n\n          case 5:\n            stream = _context4.sent;\n            newScreenTrack = first(stream.getVideoTracks());\n\n            _this.setState({\n              screenTrack: new TwilioVideo.LocalVideoTrack(newScreenTrack)\n            });\n\n            videoRoom.localParticipant.publishTrack(newScreenTrack);\n            videoRoom.localParticipant.unpublishTrack(localVideoTrack);\n            _context4.next = 15;\n            break;\n\n          case 12:\n            videoRoom.localParticipant.unpublishTrack(screenTrack);\n            videoRoom.localParticipant.publishTrack(localVideoTrack);\n\n            _this.stopScreenTrack();\n\n          case 15:\n            _context4.next = 21;\n            break;\n\n          case 17:\n            _context4.prev = 17;\n            _context4.t0 = _context4[\"catch\"](0);\n\n            _this.stopScreenTrack();\n\n            _this.setState({\n              errorMessage: _context4.t0.message\n            });\n\n          case 21:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4, null, [[0, 17]]);\n    }));\n\n    this.hideErrorMessage = () => this.setState({\n      errorMessage: null\n    });\n\n    this.changeUserName = userName => this.setState({\n      userName\n    });\n\n    this.changeRoomName = roomName => this.setState({\n      roomName\n    });\n  }\n\n  componentDidMount() {\n    if (adapter.browserDetails.browser === \"firefox\") {\n      adapter.browserShim.shimGetDisplayMedia(window, \"screen\");\n    } // window.location.reload();\n\n\n    console.log(this.room_value_id);\n  }\n\n  render() {\n    const render = this.props.render;\n    const _this$state2 = this.state,\n          videoRoom = _this$state2.videoRoom,\n          isJoining = _this$state2.isJoining,\n          userName = _this$state2.userName,\n          roomName = _this$state2.roomName,\n          errorMessage = _this$state2.errorMessage,\n          screenTrack = _this$state2.screenTrack;\n    return render({\n      videoRoom,\n      userName,\n      roomName,\n      isVideoSupported: TwilioVideo.isSupported,\n      isScreenSharingSupported: Boolean(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia),\n      isScreenSharingEnabled: Boolean(screenTrack),\n      canJoin: isEmpty(userName) && isEmpty(roomName),\n      isJoining,\n      onJoin: this.joinRoom,\n      onLeave: this.leaveRoom,\n      onShare: this.shareScreen,\n      onRoomNameChange: this.changeRoomName,\n      onUserNameChange: this.changeUserName,\n      errorMessage,\n      onErrorMessageHide: this.hideErrorMessage\n    });\n  }\n\n}\n\nAppContainer.propTypes = {\n  render: PropTypes.func.isRequired\n};\nexport default AppContainer;","map":{"version":3,"sources":["C:/Users/khouloud/Documents/PI/MERN_Stack_PI/src/components/App/AppContainer.js"],"names":["PureComponent","PropTypes","adapter","TwilioVideo","isEmpty","first","getToken","AppContainer","state","videoRoom","isJoining","userName","roomName","errorMessage","str","window","location","href","res","search","room_value_id","substr","length","response","data","token","joinRoom","setState","createLocalVideoTrack","localVideoTrack","createLocalAudioTrack","localAudioTrack","connect","name","tracks","insights","on","stopVideoTrack","stopAudioTrack","stopScreenTrack","message","leaveRoom","disconnect","stopTrack","trackName","track","stop","shareScreen","screenTrack","navigator","mediaDevices","getDisplayMedia","video","stream","newScreenTrack","getVideoTracks","LocalVideoTrack","localParticipant","publishTrack","unpublishTrack","hideErrorMessage","changeUserName","changeRoomName","componentDidMount","browserDetails","browser","browserShim","shimGetDisplayMedia","console","log","render","props","isVideoSupported","isSupported","isScreenSharingSupported","Boolean","isScreenSharingEnabled","canJoin","onJoin","onLeave","onShare","onRoomNameChange","onUserNameChange","onErrorMessageHide","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["import { PureComponent } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport adapter from \"webrtc-adapter\";\r\nimport TwilioVideo from \"twilio-video\";\r\nimport { isEmpty, first } from \"lodash\";\r\n\r\nimport { getToken } from \"../../api\";\r\n\r\nclass AppContainer extends PureComponent {\r\n  static propTypes = {\r\n    render: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = {\r\n    videoRoom: null,\r\n    isJoining: false,\r\n    userName: \"\",\r\n    roomName: \"\",\r\n    errorMessage: null\r\n  };\r\n   str=window.location.href;\r\n   res= this.str.search(\"/App/\")+5;\r\n   room_value_id = this.str.substr(this.res, this.str.length-1);\r\n\r\n  componentDidMount() {\r\n    if (adapter.browserDetails.browser === \"firefox\") {\r\n      adapter.browserShim.shimGetDisplayMedia(window, \"screen\");\r\n    }\r\n   // window.location.reload();\r\n     console.log(this.room_value_id)\r\n  }\r\n\r\n  getToken = async () => {\r\n    const { userName } = this.state;\r\n\r\n    const response = await getToken(userName);\r\n    return response.data.token;\r\n  };\r\n\r\n  joinRoom = async () => {\r\n    const { roomName } = this.state;\r\n\r\n    this.setState({ isJoining: true });\r\n\r\n    try {\r\n      const token = await this.getToken();\r\n\r\n      const localVideoTrack = await TwilioVideo.createLocalVideoTrack();\r\n      this.setState({ localVideoTrack });\r\n\r\n      const localAudioTrack = await TwilioVideo.createLocalAudioTrack();\r\n      this.setState({ localAudioTrack });\r\n\r\n      const videoRoom = await TwilioVideo.connect(\r\n        token,\r\n        {\r\n          name: roomName,\r\n          tracks: [localVideoTrack, localAudioTrack],\r\n          insights: false\r\n        }\r\n      );\r\n\r\n      videoRoom.on(\"disconnected\", () => {\r\n        this.stopVideoTrack();\r\n        this.stopAudioTrack();\r\n        this.stopScreenTrack();\r\n\r\n        this.setState({\r\n          videoRoom: null\r\n        });\r\n      });\r\n\r\n      this.setState({ videoRoom });\r\n    } catch (error) {\r\n      this.stopVideoTrack();\r\n      this.stopAudioTrack();\r\n\r\n      this.setState({\r\n        errorMessage: error.message\r\n      });\r\n    }\r\n\r\n    this.setState({ isJoining: false });\r\n  };\r\n\r\n  leaveRoom = async () => {\r\n    const { videoRoom } = this.state;\r\n\r\n    if (videoRoom) {\r\n      videoRoom.disconnect();\r\n    }\r\n  };\r\n\r\n  stopTrack = trackName => {\r\n    const track = this.state[trackName];\r\n\r\n    if (track) {\r\n      track.stop();\r\n      this.setState({ [trackName]: null });\r\n    }\r\n  };\r\n\r\n  stopScreenTrack = () => this.stopTrack(\"screenTrack\");\r\n\r\n  stopVideoTrack = () => this.stopTrack(\"localVideoTrack\");\r\n\r\n  stopAudioTrack = () => this.stopTrack(\"localAudioTrack\");\r\n\r\n  shareScreen = async () => {\r\n    try {\r\n      const { videoRoom, localVideoTrack, screenTrack } = this.state;\r\n\r\n      if (!screenTrack) {\r\n        const stream = await navigator.mediaDevices.getDisplayMedia({\r\n          video: true\r\n        });\r\n        const newScreenTrack = first(stream.getVideoTracks());\r\n\r\n        this.setState({\r\n          screenTrack: new TwilioVideo.LocalVideoTrack(newScreenTrack)\r\n        });\r\n\r\n        videoRoom.localParticipant.publishTrack(newScreenTrack);\r\n        videoRoom.localParticipant.unpublishTrack(localVideoTrack);\r\n      } else {\r\n        videoRoom.localParticipant.unpublishTrack(screenTrack);\r\n        videoRoom.localParticipant.publishTrack(localVideoTrack);\r\n        this.stopScreenTrack();\r\n      }\r\n    } catch (error) {\r\n      this.stopScreenTrack();\r\n\r\n      this.setState({\r\n        errorMessage: error.message\r\n      });\r\n    }\r\n  };\r\n\r\n  hideErrorMessage = () => this.setState({ errorMessage: null });\r\n\r\n  changeUserName = userName => this.setState({ userName });\r\n\r\n  changeRoomName = roomName => this.setState({ roomName });\r\n\r\n  render() {\r\n    const { render } = this.props;\r\n    const {\r\n      videoRoom,\r\n      isJoining,\r\n      userName,\r\n      roomName,\r\n      errorMessage,\r\n      screenTrack\r\n    } = this.state;\r\n\r\n    return render({\r\n      videoRoom,\r\n      userName,\r\n      roomName,\r\n      isVideoSupported: TwilioVideo.isSupported,\r\n      isScreenSharingSupported: Boolean(\r\n        navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia\r\n      ),\r\n      isScreenSharingEnabled: Boolean(screenTrack),\r\n      canJoin: isEmpty(userName) && isEmpty(roomName),\r\n      isJoining,\r\n      onJoin: this.joinRoom,\r\n      onLeave: this.leaveRoom,\r\n      onShare: this.shareScreen,\r\n      onRoomNameChange: this.changeRoomName,\r\n      onUserNameChange: this.changeUserName,\r\n      errorMessage,\r\n      onErrorMessageHide: this.hideErrorMessage\r\n    });\r\n  }\r\n}\r\n\r\nexport default AppContainer;\r\n"]},"metadata":{},"sourceType":"module"}