{"ast":null,"code":"'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    JSON3 = require('json3'),\n    objectUtils = require('./utils/object');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-ajax');\n}\n\nfunction InfoAjax(url, AjaxObject) {\n  EventEmitter.call(this);\n  var self = this;\n  var t0 = +new Date();\n  this.xo = new AjaxObject('GET', url);\n  this.xo.once('finish', function (status, text) {\n    var info, rtt;\n\n    if (status === 200) {\n      rtt = +new Date() - t0;\n\n      if (text) {\n        try {\n          info = JSON3.parse(text);\n        } catch (e) {\n          debug('bad json', text);\n        }\n      }\n\n      if (!objectUtils.isObject(info)) {\n        info = {};\n      }\n    }\n\n    self.emit('finish', info, rtt);\n    self.removeAllListeners();\n  });\n}\n\ninherits(InfoAjax, EventEmitter);\n\nInfoAjax.prototype.close = function () {\n  this.removeAllListeners();\n  this.xo.close();\n};\n\nmodule.exports = InfoAjax;","map":{"version":3,"sources":["C:/Users/khouloud/Documents/PI/MERN_Stack_PI/node_modules/sockjs-client/lib/info-ajax.js"],"names":["EventEmitter","require","inherits","JSON3","objectUtils","debug","process","env","NODE_ENV","InfoAjax","url","AjaxObject","call","self","t0","Date","xo","once","status","text","info","rtt","parse","e","isObject","emit","removeAllListeners","prototype","close","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,YAAY,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,YAArC;AAAA,IACIE,QAAQ,GAAGD,OAAO,CAAC,UAAD,CADtB;AAAA,IAEIE,KAAK,GAAGF,OAAO,CAAC,OAAD,CAFnB;AAAA,IAGIG,WAAW,GAAGH,OAAO,CAAC,gBAAD,CAHzB;;AAMA,IAAII,KAAK,GAAG,iBAAW,CAAE,CAAzB;;AACA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCH,EAAAA,KAAK,GAAGJ,OAAO,CAAC,OAAD,CAAP,CAAiB,yBAAjB,CAAR;AACD;;AAED,SAASQ,QAAT,CAAkBC,GAAlB,EAAuBC,UAAvB,EAAmC;AACjCX,EAAAA,YAAY,CAACY,IAAb,CAAkB,IAAlB;AAEA,MAAIC,IAAI,GAAG,IAAX;AACA,MAAIC,EAAE,GAAG,CAAC,IAAIC,IAAJ,EAAV;AACA,OAAKC,EAAL,GAAU,IAAIL,UAAJ,CAAe,KAAf,EAAsBD,GAAtB,CAAV;AAEA,OAAKM,EAAL,CAAQC,IAAR,CAAa,QAAb,EAAuB,UAASC,MAAT,EAAiBC,IAAjB,EAAuB;AAC5C,QAAIC,IAAJ,EAAUC,GAAV;;AACA,QAAIH,MAAM,KAAK,GAAf,EAAoB;AAClBG,MAAAA,GAAG,GAAI,CAAC,IAAIN,IAAJ,EAAF,GAAgBD,EAAtB;;AACA,UAAIK,IAAJ,EAAU;AACR,YAAI;AACFC,UAAAA,IAAI,GAAGjB,KAAK,CAACmB,KAAN,CAAYH,IAAZ,CAAP;AACD,SAFD,CAEE,OAAOI,CAAP,EAAU;AACVlB,UAAAA,KAAK,CAAC,UAAD,EAAac,IAAb,CAAL;AACD;AACF;;AAED,UAAI,CAACf,WAAW,CAACoB,QAAZ,CAAqBJ,IAArB,CAAL,EAAiC;AAC/BA,QAAAA,IAAI,GAAG,EAAP;AACD;AACF;;AACDP,IAAAA,IAAI,CAACY,IAAL,CAAU,QAAV,EAAoBL,IAApB,EAA0BC,GAA1B;AACAR,IAAAA,IAAI,CAACa,kBAAL;AACD,GAlBD;AAmBD;;AAEDxB,QAAQ,CAACO,QAAD,EAAWT,YAAX,CAAR;;AAEAS,QAAQ,CAACkB,SAAT,CAAmBC,KAAnB,GAA2B,YAAW;AACpC,OAAKF,kBAAL;AACA,OAAKV,EAAL,CAAQY,KAAR;AACD,CAHD;;AAKAC,MAAM,CAACC,OAAP,GAAiBrB,QAAjB","sourcesContent":["'use strict';\r\n\r\nvar EventEmitter = require('events').EventEmitter\r\n  , inherits = require('inherits')\r\n  , JSON3 = require('json3')\r\n  , objectUtils = require('./utils/object')\r\n  ;\r\n\r\nvar debug = function() {};\r\nif (process.env.NODE_ENV !== 'production') {\r\n  debug = require('debug')('sockjs-client:info-ajax');\r\n}\r\n\r\nfunction InfoAjax(url, AjaxObject) {\r\n  EventEmitter.call(this);\r\n\r\n  var self = this;\r\n  var t0 = +new Date();\r\n  this.xo = new AjaxObject('GET', url);\r\n\r\n  this.xo.once('finish', function(status, text) {\r\n    var info, rtt;\r\n    if (status === 200) {\r\n      rtt = (+new Date()) - t0;\r\n      if (text) {\r\n        try {\r\n          info = JSON3.parse(text);\r\n        } catch (e) {\r\n          debug('bad json', text);\r\n        }\r\n      }\r\n\r\n      if (!objectUtils.isObject(info)) {\r\n        info = {};\r\n      }\r\n    }\r\n    self.emit('finish', info, rtt);\r\n    self.removeAllListeners();\r\n  });\r\n}\r\n\r\ninherits(InfoAjax, EventEmitter);\r\n\r\nInfoAjax.prototype.close = function() {\r\n  this.removeAllListeners();\r\n  this.xo.close();\r\n};\r\n\r\nmodule.exports = InfoAjax;\r\n"]},"metadata":{},"sourceType":"script"}